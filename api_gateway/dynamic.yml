# Dynamic Traefik Configuration - Routes and Services
http:
  middlewares: {}
  
  routers:
    # Book catalog service routes (authors and books)
    authors:
      entryPoints:
        - web
      service: book-catalog-service
      rule: PathPrefix(`/api/authors`)
    
    books:
      entryPoints:
        - web
      service: book-catalog-service
      rule: PathPrefix(`/api/books`)
    
    # Book review service routes
    reviews:
      entryPoints:
        - web
      service: book-review-service
      rule: PathPrefix(`/api/reviews`)
    
    # Health check service routes
    health-check:
      entryPoints:
        - web
      priority: 2147483647
      service: health-check-service
      rule: PathPrefix(`/api/health`)
  
  services:
    book-catalog-service:
      loadBalancer:
        servers:
          - url: http://book-catalog-service:5000
        passHostHeader: true
    
    book-review-service:
      loadBalancer:
        servers:
          - url: http://book-review-service:5000
        passHostHeader: true
    
    health-check-service:
      loadBalancer:
        servers:
          - url: http://health-check-service:5000
        passHostHeader: true
